import serial
import time
import sys

def convert_hex(string):
    res = []
    result = []
    for item in string:
        res.append(item)
    for i in res:
        result.append(hex(i))
    return result

ser = serial.Serial("/dev/ttyUSB0", 115200)    # 连接串口

while True:
  print(convert_hex(ser.read_until(b'\xCF')))

# ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x02\x00\x00\x3B\xCF')

# time.sleep(1)

# ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x00\x00\x3D\xCF')

# time.sleep(1)

# ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x00\x00\x3E\xCF')

# time.sleep(1)

# ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x01\x00\x3F\xCF')

# time.sleep(1)

# ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x02\x00\x40\xCF')

# time.sleep(1)

# ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x03\x00\x41\xCF')

#
# ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x02\x00\x00\x3B\xCF')
# for f in range(1, 20):

#   ser.write(b'\x86\xAB\x00\x0B\xE8\x15' + f.to_bytes(1,'little') + b'\x00\x00' + (0x40 + f).to_bytes(1,'little') + b'\xCF')

#   time.sleep(4)

sys.exit(0)

while True:

  time.sleep(2)

  ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x02\x00\x00\x3B\xCF')

  time.sleep(2)

  ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x05\x00\x00\x3F\xCF')

  print(time.asctime())

  time.sleep(2)

  ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x07\x00\x00\x41\xCF')

  print(time.asctime())


'''
# test 0x04

ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x02\x00\x00\x3B\xCF')

time.sleep(1)

ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x00\x00\x3D\xCF')

time.sleep(1)

ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x01\x00\x3E\xCF')

time.sleep(1)

ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x02\x00\x3F\xCF')

time.sleep(1)

ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x04\x03\x00\x40\xCF')

time.sleep(1)

ser.write(b'\x86\xAB\x00\x0B\xE8\x15\x02\x00\x00\x3B\xCF')

time.sleep(1)

'''